{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Карта</title>
    <script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css"  href="{% static 'main/css/reset.css'%}">
    <link rel="stylesheet" type="text/css"  href="{% static 'main/css/font.css'%}">
    <link rel="stylesheet" type="text/css"  href="{% static 'main/css/map.css'%}">
    <link rel="stylesheet" href="{% static 'main/css/main.css'%}">
</head>


<body>
    <main class="map-page-container">
        <script>
            ymaps.ready(init);
            function init() {
                var myMap = new ymaps.Map('map', {
                    center: [55.161997, 61.401485],
                    zoom: 12
                });
                {% for company_with_address in companies_with_address %}
                var placemark = new ymaps.Placemark(["{{company_with_address.coordinate_x|safe}}", "{{company_with_address.coordinate_y|safe}}"], {
                    hintContent: "{{company_with_address.name|safe}}",
                    balloonContent: "{{company_with_address.address|safe}}"
                }, {
                    iconColor: "{{company_with_address.color|safe}}"
                });
                myMap.geoObjects.add(placemark);
                {% endfor %}
            }
        </script>
        <div class="main-map-section">
            <div class="map-header">

<!--            <img class="map-header__icon" src="{% static 'accounts/icons/user.svg'%}">-->
            <span class="map-title">Карта компаний</span>

            </div>
            <div class="map-legend-container">
                {% for subcategory in subcategories %}
                    <div class="map-legend-item">
                        <div class="map-legend-item-rect" style="background-color:{{subcategory.color}}"></div>
                        <span class="map-legend-item-text">{{subcategory.subcategory_name}}</span>
                    </div>
                {% endfor %}
            </div>
            <form class="map-logout" action="{%url 'home'%}">
                <button class="map-logout__button button" type="submit">
                    <img class="map-logout_icon" src="{% static 'accounts/icons/logout.svg'%}">
                    <span>Главная</span>
                </button>
            </form>

        </div>

        <div id="map" style="width: 100%; height: 100%;"></div>
    </main>
</body>
